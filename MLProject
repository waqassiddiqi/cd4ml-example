name: cd4ml-example

conda_env: conda.yaml

entry_points:
  main:
    parameters:
      alpha: {type: float, default: 0.5}
      l1_ratio: {type: float, default: 0.1}
    command: "dvc pull && python src/train.py {alpha} {l1_ratio}"

  evaluate:
    parameters:
      run_id: {type: string}
    command: "python src/evaluate.py {run_id}"

  register:
    parameters:
      run_id: {type: string}
      model_name: {type: string}
    command: "python src/register_model.py {run_id} {model_name}"

  deploy:
    parameters:
      run_id: {type: string}
      model_name: {type: string}
    command: "python src/deploy.py {run_id} {model_name}"
